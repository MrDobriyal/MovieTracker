(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[167],{727:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>o,ZB:()=>n,Zp:()=>s,aR:()=>l});var r=a(7876);a(4232);var i=a(4317);function s(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,i.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function l(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,i.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function n(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,i.cn)("leading-none font-semibold",t),...a})}function d(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,i.cn)("text-muted-foreground text-sm",t),...a})}function o(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,i.cn)("px-6",t),...a})}},1084:(e,t,a)=>{"use strict";a.d(t,{U:()=>i});let r=a(1040).A.create({baseURL:"https://api.themoviedb.org/3",params:{api_key:"cc9c0913f13d745d2e02ba5895f91de1"}}),i={fetchMovies:async e=>{let{adult:t,video:a,language:i,sort_by:s,page:l,with_original_language:n,with_genres:d}=e,o={include_adult:null!=t&&t,include_video:null!=a&&a,language:null!=i?i:"en",with_original_language:null!=n?n:"en",page:null!=l?l:1,sort_by:null!=s?s:"popularity.desc"};return d&&1!==d&&(o.with_genres=d),(await r.get("/discover/movie",{params:o})).data},genreService:async()=>(await r.get("/genre/movie/list")).data,fetchMovieById:async e=>(await r.get("/movie/".concat(e),{params:{append_to_response:"videos,credits"}})).data,serchMovie:async e=>{let{query:t,adult:a,language:i,page:s,with_original_language:l,with_genres:n}=e,d={query:t,include_adult:null!=a&&a,language:null!=i?i:"en",with_original_language:null!=l?l:"en",page:null!=s?s:1};return n&&1!==n&&(d.with_genres=n),(await r.get("/search/movie",{params:d})).data},fetchMovieWatchProviders:async e=>(await r.get("/movie/".concat(e,"/watch/providers"))).data.results}},2130:(e,t,a)=>{"use strict";a.d(t,{Tc:()=>l,VL:()=>s,yb:()=>i});var r=a(7274);let i=async e=>{let{data:t,error:a}=await r.N.from("watched_movies").select("movie_id").eq("user_id",e);return a?(console.error("Error fetching watched movies:",a.message),[]):t.map(e=>e.movie_id)},s=async(e,t)=>{try{let a=t.map(t=>({user_id:e,movie_id:t})),{error:i}=await r.N.from("watched_movies").upsert(a,{onConflict:"user_id, movie_id"});if(i)return console.error("Error adding watched movies:",i.message),!1;return!0}catch(e){return console.error("Unexpected error adding watched movies:",e),!1}},l=async(e,t)=>{let{error:a}=await r.N.from("watched_movies").delete().match({user_id:e,movie_id:t});return!a||(console.error("Error removing watched movie:",a.message),!1)}},2239:(e,t,a)=>{"use strict";a.d(t,{b:()=>r});let r=[{id:1,name:"All"},{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}]},3276:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1713).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},3657:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var r=a(7876),i=a(4232),s=a(4403),l=a(2130),n=a(2315),d=a(1084),o=a(9688),c=a(3276),u=a(9099),m=a(9930),g=a(2239),h=a(9516),x=a(8971);let v=()=>{let[e,t]=(0,i.useState)([]),[a,v]=(0,i.useState)("Popularity"),[p,f]=(0,i.useState)("all"),[b,y]=(0,i.useState)([]),[w,_]=(0,i.useState)(1),[j,N]=(0,i.useState)(1),[k,A]=(0,i.useState)("en"),[C,S]=(0,i.useState)(""),[M,q]=(0,i.useState)(1),[E,R]=(0,i.useState)(1),[P,W]=(0,i.useState)(""),[$,T]=(0,i.useState)(!1),U=(0,u.useRouter)(),{user:B}=(0,s.A)();if(!B)return U.push("/login");async function L(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let t;T(!0),"hi"===e.with_original_language?A("hi"):A("en"),t=e.query&&""!==e.query?await d.U.serchMovie({...e,query:C}):await d.U.fetchMovies(e),await d.U.fetchMovies(e),_(t.total_pages),N(t.page),y(t.results),R(t.total_results)}catch(e){W("Failed to load movies from API.")}finally{T(!1)}}(0,i.useEffect)(()=>{L({})},[]);let F=e=>{t(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,r.jsxs)("div",{className:"flex",children:[!C.trim()&&(0,r.jsx)("div",{className:"w-48 h-full  bg-gray-900 border-r border-gray-700  space-y-2 sticky top-[16px]",children:g.b.map(e=>(0,r.jsx)("button",{onClick:()=>{q(e.id),L({query:C,with_original_language:"hi"==k?"hi":"en",with_genres:e.id})},className:"block w-full text-left px-3 py-2 z-50 cursor-pointer rounded text-sm font-medium text-white transition-colors ".concat(M===e.id?"bg-red-600 text-black":"text-gray-300 hover:bg-gray-700"),children:e.name},e.id))}),(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-900 to-red-900",children:[(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-white mb-6",children:"Select Movies to Watch"}),(0,r.jsxs)("div",{className:"flex gap-2 mb-4 justify-center sm:justify-start",children:[(0,r.jsx)(n.$,{type:"button",className:"bg-red-600 hover:bg-red-400",disabled:!!C.trim(),onClick:()=>{L({query:C,with_original_language:"en",with_genres:M})},children:"Hollywood"}),(0,r.jsx)(n.$,{type:"button",className:"bg-red-600 hover:bg-red-400",disabled:!!C.trim(),onClick:()=>{L({query:C,with_original_language:"hi",with_genres:M})},children:"Bollywood"})]}),(0,r.jsxs)("div",{className:"relative max-w-md mb-6",children:[(0,r.jsx)(h.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,r.jsxs)("div",{className:"flex justify-center items-center gap-2",children:[(0,r.jsx)(x.p,{type:"text",placeholder:"Search movies...",value:C,onChange:e=>{S(e.target.value),N(1)},className:"pl-10 bg-gray-800 border-gray-700 text-white placeholder-gray-400"}),(0,r.jsx)("div",{className:" text-white bg-red-600 p-2 rounded-3xl hover:bg-red-300",children:(0,r.jsx)(h.A,{className:" w-4 h-4 ",onClick:()=>{L({query:C,with_original_language:"en",with_genres:M})}})})]})]}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 mb-6 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-4 text-gray-300",children:[(0,r.jsx)("span",{children:e.length>0?"".concat(e.length," movie").concat(e.length>1?"s":""," selected"):"Click on movies to select them"}),(0,r.jsx)(n.$,{onClick:()=>{let a=b.map(e=>e.id);t(a.every(t=>e.includes(t))?[]:a)},className:"border-gray-600 bg-white text-black hover:bg-red-500",children:"Select All"})]}),(0,r.jsx)("div",{className:"flex gap-4 flex-wrap",children:(0,r.jsxs)(n.$,{onClick:()=>{if(B){if(0===e.length)return void(0,o.oR)("Please select at least one movie to add to your watched list.");(0,l.VL)(B.id,e),(0,o.oR)("Added ".concat(e.length," movie").concat(e.length>1?"s":""," to your watched list.")),t([])}},disabled:0===e.length,className:"bg-red-600 hover:bg-red-700 disabled:opacity-50",children:[(0,r.jsx)(c.A,{className:"w-4 h-4 mr-2"}),"Add to Watched (",e.length,")"]})})]}),$&&(0,r.jsx)("p",{className:"text-gray-400",children:"Loading movies..."}),P&&(0,r.jsx)("p",{className:"text-red-400",children:P}),!$&&!P&&(0,r.jsxs)("p",{className:"text-gray-400 mb-6",children:["Showing ",b.length," of ",E," movie",1!==E&&"s",C&&' for "'.concat(C,'"')]}),(0,r.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 gap-6 mb-8",children:b.map(t=>(0,r.jsx)(m.A,{movie:t,isSelected:e.includes(t.id),showCheckbox:!0,onClick:()=>F(t.id)},t.id))})]}),w>1&&(0,r.jsxs)("div",{className:"flex justify-center items-center space-x-2",children:[(0,r.jsx)(n.$,{onClick:()=>{let e=j-1;L({query:C,page:e,with_original_language:"hi"==k?"hi":"en",with_genres:M}),N(e)},disabled:1===j,variant:"outline",className:"text-gray-300 border-gray-600 hover:bg-gray-800",children:"Previous"}),(0,r.jsx)("div",{className:"flex space-x-1",children:(0,r.jsx)(n.$,{type:"button",children:j})}),(0,r.jsx)(n.$,{onClick:()=>{let e=j+1;L({query:C,page:e,with_original_language:"hi"==k?"hi":"en",with_genres:M}),N(e)},disabled:j===w,variant:"outline",className:"text-gray-300 border-gray-600 hover:bg-gray-800",children:"Next"})]})]})]})}},8850:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/selectMovies",function(){return a(3657)}])},8971:(e,t,a)=>{"use strict";a.d(t,{p:()=>s});var r=a(7876);a(4232);var i=a(4317);function s(e){let{className:t,type:a,...s}=e;return(0,r.jsx)("input",{type:a,"data-slot":"input",className:(0,i.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...s})}},9516:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1713).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},9930:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(7876);a(4232);var i=a(9099),s=a(727),l=a(2239);let n=e=>{let{movie:t,onClick:a,isSelected:n=!1,showCheckbox:d=!1,descriptionOpen:o=!1}=e,c=(0,i.useRouter)();return(0,r.jsx)(s.Zp,{className:"bg-gray-800 border-gray-700 hover:border-red-500 transition-all duration-300 cursor-pointer transform hover:scale-105 ".concat(n?"ring-2 ring-red-500 border-red-500":""),onClick:()=>{o?c.push("/movie/".concat(t.id)):a&&a()},children:(0,r.jsxs)(s.Wu,{className:"p-0 relative",children:[d&&(0,r.jsx)("div",{className:"absolute top-2 right-2 z-10",children:(0,r.jsx)("div",{className:"w-5 h-5 rounded border-2 flex items-center justify-center ".concat(n?"bg-red-600 border-red-600":"bg-transparent border-gray-400"),children:n&&(0,r.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})}),(0,r.jsx)("div",{className:"aspect-[2/3] overflow-hidden rounded-t-lg",children:(0,r.jsx)("img",{src:"https://image.tmdb.org/t/p/w500"+t.poster_path,alt:t.title,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-110"})}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-white mb-1 truncate",children:t.title}),(0,r.jsxs)("div",{className:"flex justify-between items-center text-sm text-gray-400",children:[(0,r.jsx)("span",{children:t.release_date}),(0,r.jsxs)("span",{children:["⭐ ",t.vote_average]})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:function(e){return e.map((t,a)=>{let r=l.b.find(e=>e.id===t),i=a==e.length-1?" ":", ";return r?r.name+i:null})}(t.genre_ids)})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[40,636,593,792],()=>t(8850)),_N_E=e.O()}]);