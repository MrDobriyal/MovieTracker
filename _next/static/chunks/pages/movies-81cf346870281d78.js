(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[735],{727:(e,t,a)=>{"use strict";a.d(t,{BT:()=>n,Wu:()=>o,ZB:()=>d,Zp:()=>s,aR:()=>l});var r=a(7876);a(4232);var i=a(4317);function s(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,i.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function l(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,i.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function d(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,i.cn)("leading-none font-semibold",t),...a})}function n(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,i.cn)("text-muted-foreground text-sm",t),...a})}function o(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,i.cn)("px-6",t),...a})}},1084:(e,t,a)=>{"use strict";a.d(t,{U:()=>i});let r=a(1040).A.create({baseURL:"https://api.themoviedb.org/3",params:{api_key:"cc9c0913f13d745d2e02ba5895f91de1"}}),i={fetchMovies:async e=>{let{adult:t,video:a,language:i,sort_by:s,page:l,with_original_language:d,with_genres:n}=e,o={include_adult:null!=t&&t,include_video:null!=a&&a,language:null!=i?i:"en",with_original_language:null!=d?d:"en",page:null!=l?l:1,sort_by:null!=s?s:"popularity.desc"};return n&&1!==n&&(o.with_genres=n),(await r.get("/discover/movie",{params:o})).data},genreService:async()=>(await r.get("/genre/movie/list")).data,fetchMovieById:async e=>(await r.get("/movie/".concat(e),{params:{append_to_response:"videos,credits"}})).data,serchMovie:async e=>{let{query:t,adult:a,language:i,page:s,with_original_language:l,with_genres:d}=e,n={query:t,include_adult:null!=a&&a,language:null!=i?i:"en",with_original_language:null!=l?l:"en",page:null!=s?s:1};return d&&1!==d&&(n.with_genres=d),(await r.get("/search/movie",{params:n})).data},fetchMovieWatchProviders:async e=>(await r.get("/movie/".concat(e,"/watch/providers"))).data.results}},2130:(e,t,a)=>{"use strict";a.d(t,{Tc:()=>l,VL:()=>s,yb:()=>i});var r=a(7274);let i=async e=>{let{data:t,error:a}=await r.N.from("watched_movies").select("movie_id").eq("user_id",e);return a?(console.error("Error fetching watched movies:",a.message),[]):t.map(e=>e.movie_id)},s=async(e,t)=>{try{let a=t.map(t=>({user_id:e,movie_id:t})),{error:i}=await r.N.from("watched_movies").upsert(a,{onConflict:"user_id, movie_id"});if(i)return console.error("Error adding watched movies:",i.message),!1;return!0}catch(e){return console.error("Unexpected error adding watched movies:",e),!1}},l=async(e,t)=>{let{error:a}=await r.N.from("watched_movies").delete().match({user_id:e,movie_id:t});return!a||(console.error("Error removing watched movie:",a.message),!1)}},2239:(e,t,a)=>{"use strict";a.d(t,{b:()=>r});let r=[{id:1,name:"All"},{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}]},4049:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>S});var r=a(7876),i=a(4232),s=a(9930),l=a(8971),d=a(2315),n=a(9516),o=a(1084),c=a(2239),m=a(4403),u=a(9761),h=a(4317);function g(e){let{...t}=e;return(0,r.jsx)(u._s.Root,{"data-slot":"drawer",...t})}function x(e){let{...t}=e;return(0,r.jsx)(u._s.Trigger,{"data-slot":"drawer-trigger",...t})}function v(e){let{...t}=e;return(0,r.jsx)(u._s.Portal,{"data-slot":"drawer-portal",...t})}function f(e){let{className:t,...a}=e;return(0,r.jsx)(u._s.Overlay,{"data-slot":"drawer-overlay",className:(0,h.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function p(e){let{className:t,children:a,...i}=e;return(0,r.jsxs)(v,{"data-slot":"drawer-portal",children:[(0,r.jsx)(f,{}),(0,r.jsxs)(u._s.Content,{"data-slot":"drawer-content",className:(0,h.cn)("group/drawer-content bg-background fixed z-50 flex h-auto flex-col","data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0 data-[vaul-drawer-direction=top]:mb-24 data-[vaul-drawer-direction=top]:max-h-[80vh] data-[vaul-drawer-direction=top]:rounded-b-lg data-[vaul-drawer-direction=top]:border-b","data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:mt-24 data-[vaul-drawer-direction=bottom]:max-h-[80vh] data-[vaul-drawer-direction=bottom]:rounded-t-lg data-[vaul-drawer-direction=bottom]:border-t","data-[vaul-drawer-direction=right]:inset-y-0 data-[vaul-drawer-direction=right]:right-0 data-[vaul-drawer-direction=right]:w-3/4 data-[vaul-drawer-direction=right]:border-l data-[vaul-drawer-direction=right]:sm:max-w-sm","data-[vaul-drawer-direction=left]:inset-y-0 data-[vaul-drawer-direction=left]:left-0 data-[vaul-drawer-direction=left]:w-3/4 data-[vaul-drawer-direction=left]:border-r data-[vaul-drawer-direction=left]:sm:max-w-sm",t),...i,children:[(0,r.jsx)("div",{className:"bg-muted mx-auto mt-4 hidden h-2 w-[100px] shrink-0 rounded-full group-data-[vaul-drawer-direction=bottom]/drawer-content:block"}),a]})]})}function w(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"drawer-header",className:(0,h.cn)("flex flex-col gap-0.5 p-4 group-data-[vaul-drawer-direction=bottom]/drawer-content:text-center group-data-[vaul-drawer-direction=top]/drawer-content:text-center md:gap-1.5 md:text-left",t),...a})}function b(e){let{className:t,...a}=e;return(0,r.jsx)(u._s.Title,{"data-slot":"drawer-title",className:(0,h.cn)("text-foreground font-semibold",t),...a})}var y=a(727),j=a(2089),N=a(9688),_=a(2130);let k=e=>{let{triggerElement:t}=e,{user:a}=(0,m.A)(),[s,l]=(0,i.useState)(!1),[n,c]=(0,i.useState)([]),[u,h]=(0,i.useState)([]);(0,i.useEffect)(()=>{a&&(0,_.yb)(a.id).then(c)},[a]),(0,i.useEffect)(()=>{a&&n.length>0&&(async()=>{try{let e=n.map(e=>o.U.fetchMovieById(e)),t=await Promise.all(e);h(t)}catch(e){console.error("Failed to fetch watched movies:",e)}})()},[n]);let v=e=>{if(!a)return;(0,_.Tc)(a.id,e),h(t=>t.filter(t=>t.id!==e));let t=u.find(t=>t.id===e);(0,N.oR)('"'.concat(null==t?void 0:t.title,'" has been removed from your watched list.'))};return(0,r.jsxs)(g,{open:s,onOpenChange:l,children:[(0,r.jsx)(x,{asChild:!0,children:t||(0,r.jsx)(d.$,{variant:"outline",children:"Watched Movies"})}),(0,r.jsxs)(p,{className:"bg-gray-900 text-white  overflow-y-auto max-h-none",children:[(0,r.jsx)(w,{children:(0,r.jsx)(b,{className:"text-white",children:"My Watched Movies"})}),a&&0!==n.length&&0!==u.length?(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 ",children:u.map(e=>{var t;return(0,r.jsx)(y.Zp,{className:"bg-gray-800 border-gray-700",children:(0,r.jsx)(y.Wu,{className:"p-0",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"w-24 h-36 flex-shrink-0",children:(0,r.jsx)("img",{src:"https://image.tmdb.org/t/p/w500".concat(e.poster_path),alt:e.title,className:"w-full h-full object-cover rounded-l-lg"})}),(0,r.jsxs)("div",{className:"flex-1 p-4 flex flex-col justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-white mb-1",children:e.title}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:null==(t=e.release_date)?void 0:t.split("-")[0]}),(0,r.jsxs)("p",{className:"text-sm text-gray-400",children:["⭐ ",e.vote_average]})]}),(0,r.jsxs)(d.$,{onClick:()=>v(e.id),variant:"outline",size:"sm",className:"mt-3 text-red-400 border-red-400 hover:bg-red-400 hover:text-white",children:[(0,r.jsx)(j.A,{className:"w-4 h-4 mr-2"}),"Remove"]})]})]})})},e.id)})}):(0,r.jsxs)("div",{className:"text-center p-4",children:[(0,r.jsx)("p",{className:"text-gray-400",children:"No movies watched yet. Start watching!"}),(0,r.jsx)(d.$,{onClick:()=>window.location.href="/selectMovies",className:"mt-4 bg-red-600 hover:bg-red-700",children:"Select Movies to Watch"})]})]})]})};var C=a(3276);let S=()=>{let[e,t]=(0,i.useState)(""),[a,u]=(0,i.useState)(1),[h,v]=(0,i.useState)([]),[f,y]=(0,i.useState)(1),[j,S]=(0,i.useState)(1),[A,M]=(0,i.useState)(!1),[$,E]=(0,i.useState)(""),[q,R]=(0,i.useState)("en"),[W,T]=(0,i.useState)(1),[P,z]=(0,i.useState)([]),[B,U]=(0,i.useState)(!1),{user:F}=(0,m.A)(),L=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let a;"hi"===t.with_original_language?R("hi"):R("en"),M(!0),a=t.query&&""!==t.query?await o.U.serchMovie({...t,query:e}):await o.U.fetchMovies(t),v(a.results||[]),u(a.page),y(a.total_pages),S(a.total_results)}catch(e){E("Failed to load movies from API.")}finally{M(!1)}};(0,i.useEffect)(()=>{L()},[u]);let O=e=>{z(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-900 to-red-900",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex gap-2 mb-4 justify-center sm:justify-start",children:[(0,r.jsx)(d.$,{type:"button",className:"bg-red-600 hover:bg-red-400 cursor-pointer",disabled:!!e.trim(),onClick:()=>{L({query:e,with_original_language:"en",with_genres:W})},children:"Hollywood"}),(0,r.jsx)(d.$,{type:"button",className:"bg-green-600 hover:bg-green-400 cursor-pointer",disabled:!!e.trim(),onClick:()=>{L({query:e,with_original_language:"hi",with_genres:W})},children:"Bollywood"})]}),(0,r.jsxs)("div",{className:"relative max-w-md mb-6",children:[(0,r.jsx)(n.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,r.jsxs)("div",{className:"flex justify-center items-center gap-2",children:[(0,r.jsx)(l.p,{type:"text",placeholder:"Search movies...",value:e,onChange:e=>{t(e.target.value),u(1)},className:"pl-10 bg-gray-800 border-gray-700 text-white placeholder-gray-400"}),(0,r.jsx)("div",{className:" text-white bg-red-600 p-2 rounded-3xl hover:bg-red-300",children:(0,r.jsx)(n.A,{className:" w-4 h-4 ",onClick:()=>{L({query:e,with_original_language:"en",with_genres:W})}})})]})]}),!e.trim()&&(0,r.jsxs)(g,{children:[(0,r.jsx)(x,{children:(0,r.jsx)(d.$,{className:"bg-accent-foreground border mb-3",children:"Genre"})}),(0,r.jsxs)(p,{className:"bg-accent-foreground text-white",children:[(0,r.jsx)(w,{children:(0,r.jsx)(b,{className:"text-white",children:"Genres"})}),(0,r.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 m-auto",children:c.b.map(t=>(0,r.jsx)("div",{children:(0,r.jsx)("button",{onClick:()=>{T(t.id),L({query:e,with_original_language:"hi"==q?"hi":"en",with_genres:t.id})},className:"block w-fit text-left px-3 py-2 z-50 cursor-pointer rounded text-sm font-medium text-black transition-colors ".concat(W===t.id?"bg-red-600 text-white":"text-white hover:bg-gray-700"),children:t.name},t.id)}))})]})]}),(0,r.jsx)(d.$,{className:"bg-accent-foreground border mb-3 ml-2",onClick:()=>{U(e=>!e)},children:"select Movies"}),(0,r.jsx)(k,{triggerElement:(0,r.jsx)(d.$,{className:"bg-accent-foreground border mb-3 ml-2",children:"Watched"})}),B&&(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 mb-6 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-4 text-gray-300",children:[(0,r.jsx)("span",{children:P.length>0?"".concat(P.length," movie").concat(P.length>1?"s":""," selected"):"Click on movies to select them"}),(0,r.jsx)(d.$,{onClick:()=>{let e=h.map(e=>e.id);z(e.every(e=>P.includes(e))?[]:e)},className:"border-gray-600 bg-white text-black hover:bg-red-500",children:"Select All"})]}),(0,r.jsx)("div",{className:"flex gap-4 flex-wrap",children:(0,r.jsxs)(d.$,{onClick:()=>{if(F){if(0===P.length)return void(0,N.oR)("Please select at least one movie to add to your watched list.");(0,_.VL)(F.id,P),(0,N.oR)("Added ".concat(P.length," movie").concat(P.length>1?"s":""," to your watched list.")),z([])}},disabled:0===P.length,className:"bg-red-600 hover:bg-red-700 disabled:opacity-50",children:[(0,r.jsx)(C.A,{className:"w-4 h-4 mr-2"}),"Add to Watched (",P.length,")"]})})]}),A&&(0,r.jsx)("p",{className:"text-gray-400",children:"Loading movies..."}),$&&(0,r.jsx)("p",{className:"text-red-400",children:$}),!A&&!$&&(0,r.jsxs)("p",{className:"text-gray-400 mb-6",children:["Showing ",h.length," of ",j," movie",1!==j&&"s",e&&' for "'.concat(e,'"')]}),(0,r.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-8",children:h.map(e=>B?(0,r.jsx)(s.A,{movie:e,isSelected:P.includes(e.id),showCheckbox:!0,onClick:()=>O(e.id)},e.id):(0,r.jsx)(s.A,{movie:e,descriptionOpen:!0},e.id))}),!A&&0===h.length&&(0,r.jsx)("div",{className:"text-center py-12 text-gray-400",children:"No movies found matching your search."}),!A&&f>1&&(0,r.jsxs)("div",{className:"flex justify-center items-center space-x-2",children:[(0,r.jsx)(d.$,{onClick:()=>{let t=a-1;L({query:e,page:t,with_original_language:"hi"==q?"hi":"en",with_genres:W}),u(t)},disabled:1===a,variant:"outline",className:"text-gray-300 border-gray-600 hover:bg-gray-800",children:"Previous"}),(0,r.jsx)("div",{className:"flex space-x-1",children:(0,r.jsx)(d.$,{type:"button",children:a})}),(0,r.jsx)(d.$,{onClick:()=>{let t=a+1;L({query:e,page:t,with_original_language:"hi"==q?"hi":"en",with_genres:W}),u(t)},disabled:a===f,variant:"outline",className:"text-gray-300 border-gray-600 hover:bg-gray-800",children:"Next"})]})]})})}},7818:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/movies",function(){return a(4049)}])},8971:(e,t,a)=>{"use strict";a.d(t,{p:()=>s});var r=a(7876);a(4232);var i=a(4317);function s(e){let{className:t,type:a,...s}=e;return(0,r.jsx)("input",{type:a,"data-slot":"input",className:(0,i.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...s})}},9930:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var r=a(7876);a(4232);var i=a(9099),s=a(727),l=a(2239);let d=e=>{let{movie:t,onClick:a,isSelected:d=!1,showCheckbox:n=!1,descriptionOpen:o=!1}=e,c=(0,i.useRouter)();return(0,r.jsx)(s.Zp,{className:"bg-gray-800 border-gray-700 hover:border-red-500 transition-all duration-300 cursor-pointer transform hover:scale-105 ".concat(d?"ring-2 ring-red-500 border-red-500":""),onClick:()=>{o?c.push("/movie/".concat(t.id)):a&&a()},children:(0,r.jsxs)(s.Wu,{className:"p-0 relative",children:[n&&(0,r.jsx)("div",{className:"absolute top-2 right-2 z-10",children:(0,r.jsx)("div",{className:"w-5 h-5 rounded border-2 flex items-center justify-center ".concat(d?"bg-red-600 border-red-600":"bg-transparent border-gray-400"),children:d&&(0,r.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})}),(0,r.jsx)("div",{className:"aspect-[2/3] overflow-hidden rounded-t-lg",children:(0,r.jsx)("img",{src:"https://image.tmdb.org/t/p/w500"+t.poster_path,alt:t.title,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-110"})}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-white mb-1 truncate",children:t.title}),(0,r.jsxs)("div",{className:"flex justify-between items-center text-sm text-gray-400",children:[(0,r.jsx)("span",{children:t.release_date}),(0,r.jsxs)("span",{children:["⭐ ",t.vote_average]})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:function(e){return e.map((t,a)=>{let r=l.b.find(e=>e.id===t),i=a==e.length-1?" ":", ";return r?r.name+i:null})}(t.genre_ids)})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[40,261,636,593,792],()=>t(7818)),_N_E=e.O()}]);