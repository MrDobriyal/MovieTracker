(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[167],{472:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});var i=t(7876);t(4232);var r=t(9099),s=t(727);let l=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}],n=e=>{let{movie:a,onClick:t,isSelected:n=!1,showCheckbox:d=!1,descriptionOpen:o=!1}=e,c=(0,r.useRouter)();return(0,i.jsx)(s.Zp,{className:"bg-gray-800 border-gray-700 hover:border-red-500 transition-all duration-300 cursor-pointer transform hover:scale-105 ".concat(n?"ring-2 ring-red-500 border-red-500":""),onClick:()=>{o?c.push("/movie/".concat(a.id)):t&&t()},children:(0,i.jsxs)(s.Wu,{className:"p-0 relative",children:[d&&(0,i.jsx)("div",{className:"absolute top-2 right-2 z-10",children:(0,i.jsx)("div",{className:"w-5 h-5 rounded border-2 flex items-center justify-center ".concat(n?"bg-red-600 border-red-600":"bg-transparent border-gray-400"),children:n&&(0,i.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})}),(0,i.jsx)("div",{className:"aspect-[2/3] overflow-hidden rounded-t-lg",children:(0,i.jsx)("img",{src:"https://image.tmdb.org/t/p/w500"+a.poster_path,alt:a.title,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-110"})}),(0,i.jsxs)("div",{className:"p-4",children:[(0,i.jsx)("h3",{className:"font-semibold text-white mb-1 truncate",children:a.title}),(0,i.jsxs)("div",{className:"flex justify-between items-center text-sm text-gray-400",children:[(0,i.jsx)("span",{children:a.release_date}),(0,i.jsxs)("span",{children:["⭐ ",a.vote_average]})]}),(0,i.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:function(e){return e.map((a,t)=>{let i=l.find(e=>e.id===a),r=t==e.length-1?" ":", ";return i?i.name+r:null})}(a.genre_ids)})]})]})})}},727:(e,a,t)=>{"use strict";t.d(a,{BT:()=>d,Wu:()=>o,ZB:()=>n,Zp:()=>s,aR:()=>l});var i=t(7876);t(4232);var r=t(4317);function s(e){let{className:a,...t}=e;return(0,i.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...t})}function l(e){let{className:a,...t}=e;return(0,i.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...t})}function n(e){let{className:a,...t}=e;return(0,i.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",a),...t})}function d(e){let{className:a,...t}=e;return(0,i.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",a),...t})}function o(e){let{className:a,...t}=e;return(0,i.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",a),...t})}},1084:(e,a,t)=>{"use strict";t.d(a,{U:()=>r});let i=t(1040).A.create({baseURL:"https://api.themoviedb.org/3",params:{api_key:"cc9c0913f13d745d2e02ba5895f91de1"}}),r={fetchMovies:async e=>{let{adult:a,video:t,language:r,sort_by:s,page:l,with_original_language:n}=e;return(await i.get("/discover/movie",{params:{include_adult:null!=a&&a,include_video:null!=t&&t,language:null!=r?r:"en",with_original_language:null!=n?n:"en",page:null!=l?l:1,sort_by:null!=s?s:"popularity.desc"}})).data},genreService:async()=>(await i.get("/genre/movie/list")).data,fetchMovieById:async e=>(await i.get("/movie/".concat(e),{params:{append_to_response:"videos"}})).data}},2130:(e,a,t)=>{"use strict";t.d(a,{Tc:()=>l,VL:()=>s,yb:()=>r});var i=t(7274);let r=async e=>{let{data:a,error:t}=await i.N.from("watched_movies").select("movie_id").eq("user_id",e);return t?(console.error("Error fetching watched movies:",t.message),[]):a.map(e=>e.movie_id)},s=async(e,a)=>{try{let t=a.map(a=>({user_id:e,movie_id:a})),{error:r}=await i.N.from("watched_movies").upsert(t,{onConflict:"user_id, movie_id"});if(r)return console.error("Error adding watched movies:",r.message),!1;return!0}catch(e){return console.error("Unexpected error adding watched movies:",e),!1}},l=async(e,a)=>{let{error:t}=await i.N.from("watched_movies").delete().match({user_id:e,movie_id:a});return!t||(console.error("Error removing watched movie:",t.message),!1)}},6319:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>h});var i=t(7876),r=t(4232),s=t(4403),l=t(2130),n=t(2315),d=t(1084),o=t(9688);let c=(0,t(1713).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var u=t(9099),m=t(472);let h=()=>{let[e,a]=(0,r.useState)([]),[t,h]=(0,r.useState)("Popularity"),[g,v]=(0,r.useState)("all"),[x,p]=(0,r.useState)([]),[y,b]=(0,r.useState)(1),[f,_]=(0,r.useState)(1),[w,j]=(0,r.useState)("en"),N=(0,u.useRouter)(),{user:k}=(0,s.A)();if(!k)return N.push("/login");async function C(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=await d.U.fetchMovies(e);"hi"===e.with_original_language?j("hi"):j("en"),await d.U.fetchMovies(e),b(a.total_pages),_(a.page),p(a.results)}(0,r.useEffect)(()=>{C()},[]);let S=e=>{a(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])};return(async()=>"title"===t?await C({sort_by:"title.asc",with_original_language:"hi"==w?"hi":"en"}):"year"===t?await C({sort_by:"primary_release_date.asc",with_original_language:"hi"==w?"hi":"en"}):"rating"===t?await C({sort_by:"popularity.desc",with_original_language:"hi"==w?"hi":"en"}):"popularity"===t?await C({with_original_language:"hi"==w?"hi":"en"}):"adult"===t&&await C({adult:!0,with_original_language:"hi"==w?"hi":"en"}))(),(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-900 to-red-900",children:[(0,i.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,i.jsx)("h1",{className:"text-4xl font-bold text-white mb-6",children:"Select Movies to Watch"}),(0,i.jsxs)("div",{className:"flex gap-2 mb-4 justify-center sm:justify-start",children:[(0,i.jsx)(n.$,{type:"button",className:"bg-red-600 hover:bg-red-400",onClick:()=>{C({with_original_language:"en"})},children:"Hollywood"}),(0,i.jsx)(n.$,{type:"button",className:"bg-red-600 hover:bg-red-400",onClick:()=>{C({with_original_language:"hi"})},children:"Bollywood"})]}),(0,i.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 mb-6 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,i.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-4 text-gray-300",children:[(0,i.jsx)("span",{children:e.length>0?"".concat(e.length," movie").concat(e.length>1?"s":""," selected"):"Click on movies to select them"}),(0,i.jsx)(n.$,{onClick:()=>{let t=x.map(e=>e.id);a(t.every(a=>e.includes(a))?[]:t)},className:"border-gray-600 bg-white text-black hover:bg-red-500",children:"Select All"})]}),(0,i.jsxs)("div",{className:"flex gap-4 flex-wrap",children:[(0,i.jsxs)("select",{value:t,onChange:e=>h(e.target.value),className:"bg-gray-700 text-white px-3 py-2 rounded",children:[(0,i.jsx)("option",{value:"popularity",children:"Sort by Popularity"}),(0,i.jsx)("option",{value:"title",children:"Sort by Title"}),(0,i.jsx)("option",{value:"year",children:"Sort by Year"}),(0,i.jsx)("option",{value:"rating",children:"Sort by Rating"}),(0,i.jsx)("option",{value:"adult",children:"Includes Adult"})]}),(0,i.jsxs)(n.$,{onClick:()=>{if(k){if(0===e.length)return void(0,o.oR)("Please select at least one movie to add to your watched list.");(0,l.VL)(k.id,e),(0,o.oR)("Added ".concat(e.length," movie").concat(e.length>1?"s":""," to your watched list.")),a([])}},disabled:0===e.length,className:"bg-red-600 hover:bg-red-700 disabled:opacity-50",children:[(0,i.jsx)(c,{className:"w-4 h-4 mr-2"}),"Add to Watched (",e.length,")"]})]})]}),(0,i.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-8",children:x.map(a=>(0,i.jsx)(m.A,{movie:a,isSelected:e.includes(a.id),showCheckbox:!0,onClick:()=>S(a.id)},a.id))})]}),y>1&&(0,i.jsxs)("div",{className:"flex justify-center items-center space-x-2",children:[(0,i.jsx)(n.$,{onClick:()=>{let e=f-1;C({page:e,with_original_language:"hi"==w?"hi":"en"}),_(e)},disabled:1===f,variant:"outline",className:"text-gray-300 border-gray-600 hover:bg-gray-800",children:"Previous"}),(0,i.jsx)("div",{className:"flex space-x-1",children:(0,i.jsx)(n.$,{type:"button",children:f})}),(0,i.jsx)(n.$,{onClick:()=>{let e=f+1;C({page:e,with_original_language:"hi"==w?"hi":"en"}),_(e)},disabled:f===y,variant:"outline",className:"text-gray-300 border-gray-600 hover:bg-gray-800",children:"Next"})]})]})}},8850:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/selectMovies",function(){return t(6319)}])}},e=>{var a=a=>e(e.s=a);e.O(0,[40,636,593,792],()=>a(8850)),_N_E=e.O()}]);